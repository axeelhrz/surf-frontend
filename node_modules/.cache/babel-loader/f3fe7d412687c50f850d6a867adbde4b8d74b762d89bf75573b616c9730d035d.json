{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Gallery.css';import apiService from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PHOTOS_PER_PAGE=12;// Mostrar 12 fotos por página\nconst Gallery=_ref=>{let{onAddToCart}=_ref;const[allPhotos,setAllPhotos]=useState([]);const[displayedPhotos,setDisplayedPhotos]=useState([]);const[loading,setLoading]=useState(true);const[loadingMore,setLoadingMore]=useState(false);const[error,setError]=useState(null);const[currentPage,setCurrentPage]=useState(1);useEffect(()=>{const fetchPhotos=async()=>{try{setLoading(true);setError(null);const fetchedPhotos=await apiService.getMarketplacePhotos();setAllPhotos(fetchedPhotos);// Mostrar las primeras fotos\nsetDisplayedPhotos(fetchedPhotos.slice(0,PHOTOS_PER_PAGE));setCurrentPage(1);}catch(err){const errorMessage=err instanceof Error?err.message:'Error al cargar las fotos';setError(errorMessage);console.error('Error fetching photos:',err);}finally{setLoading(false);}};fetchPhotos();},[]);const handleLoadMore=()=>{setLoadingMore(true);// Simular un pequeño delay para mejor UX\nsetTimeout(()=>{const nextPage=currentPage+1;const startIndex=currentPage*PHOTOS_PER_PAGE;const endIndex=startIndex+PHOTOS_PER_PAGE;const newPhotos=allPhotos.slice(0,endIndex);setDisplayedPhotos(newPhotos);setCurrentPage(nextPage);setLoadingMore(false);},300);};const hasMorePhotos=displayedPhotos.length<allPhotos.length;const handleAddToCart=photo=>{const cartItem={id:photo.id,name:\"\".concat(photo.school,\" - \").concat(photo.date),price:29.99,image:photo.thumbnail};onAddToCart(cartItem);};return/*#__PURE__*/_jsx(\"section\",{className:\"gallery\",id:\"gallery\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"section-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Galer\\xEDa de Fotos\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Explora nuestra colecci\\xF3n de fotograf\\xEDas premium de surf\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"Cargando fotos...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!loading&&displayedPhotos.length===0&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"no-photos-message\",children:\"No hay fotos disponibles en este momento\"}),!loading&&displayedPhotos.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"gallery-grid\",children:displayedPhotos.map(photo=>/*#__PURE__*/_jsxs(\"div\",{className:\"photo-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-image\",children:/*#__PURE__*/_jsx(\"img\",{src:photo.thumbnail,alt:photo.filename,className:\"photo-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:photo.school}),/*#__PURE__*/_jsx(\"p\",{className:\"photo-date\",children:photo.date}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-footer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"photo-price\",children:\"$29.99\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",style:{padding:'0.5rem 1rem',fontSize:'0.85rem'},onClick:()=>handleAddToCart(photo),children:\"Comprar\"})]})]})]},photo.id))}),hasMorePhotos&&/*#__PURE__*/_jsxs(\"div\",{className:\"load-more-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary load-more-btn\",onClick:handleLoadMore,disabled:loadingMore,children:loadingMore?'Cargando...':'Ver más fotos'}),/*#__PURE__*/_jsxs(\"p\",{className:\"photos-count\",children:[\"Mostrando \",displayedPhotos.length,\" de \",allPhotos.length,\" fotos\"]})]})]})]})});};export default Gallery;","map":{"version":3,"names":["React","useState","useEffect","apiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PHOTOS_PER_PAGE","Gallery","_ref","onAddToCart","allPhotos","setAllPhotos","displayedPhotos","setDisplayedPhotos","loading","setLoading","loadingMore","setLoadingMore","error","setError","currentPage","setCurrentPage","fetchPhotos","fetchedPhotos","getMarketplacePhotos","slice","err","errorMessage","Error","message","console","handleLoadMore","setTimeout","nextPage","startIndex","endIndex","newPhotos","hasMorePhotos","length","handleAddToCart","photo","cartItem","id","name","concat","school","date","price","image","thumbnail","className","children","map","src","alt","filename","style","padding","fontSize","onClick","disabled"],"sources":["/Users/axelhernandez/Surf/frontend/src/components/Gallery.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Gallery.css';\nimport apiService, { Photo } from '../services/api';\n\ninterface GalleryProps {\n  onAddToCart: (item: any) => void;\n}\n\nconst PHOTOS_PER_PAGE = 12; // Mostrar 12 fotos por página\n\nconst Gallery: React.FC<GalleryProps> = ({ onAddToCart }) => {\n  const [allPhotos, setAllPhotos] = useState<Photo[]>([]);\n  const [displayedPhotos, setDisplayedPhotos] = useState<Photo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n    const fetchPhotos = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const fetchedPhotos = await apiService.getMarketplacePhotos();\n        setAllPhotos(fetchedPhotos);\n        // Mostrar las primeras fotos\n        setDisplayedPhotos(fetchedPhotos.slice(0, PHOTOS_PER_PAGE));\n        setCurrentPage(1);\n      } catch (err) {\n        const errorMessage = err instanceof Error ? err.message : 'Error al cargar las fotos';\n        setError(errorMessage);\n        console.error('Error fetching photos:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPhotos();\n  }, []);\n\n  const handleLoadMore = () => {\n    setLoadingMore(true);\n    // Simular un pequeño delay para mejor UX\n    setTimeout(() => {\n      const nextPage = currentPage + 1;\n      const startIndex = currentPage * PHOTOS_PER_PAGE;\n      const endIndex = startIndex + PHOTOS_PER_PAGE;\n      const newPhotos = allPhotos.slice(0, endIndex);\n      setDisplayedPhotos(newPhotos);\n      setCurrentPage(nextPage);\n      setLoadingMore(false);\n    }, 300);\n  };\n\n  const hasMorePhotos = displayedPhotos.length < allPhotos.length;\n\n  const handleAddToCart = (photo: Photo) => {\n    const cartItem = {\n      id: photo.id,\n      name: `${photo.school} - ${photo.date}`,\n      price: 29.99,\n      image: photo.thumbnail,\n    };\n    onAddToCart(cartItem);\n  };\n\n  return (\n    <section className=\"gallery\" id=\"gallery\">\n      <div className=\"section-wrapper\">\n        <div className=\"section-header\">\n          <h2>Galería de Fotos</h2>\n          <p>Explora nuestra colección de fotografías premium de surf</p>\n        </div>\n\n        {loading && (\n          <div className=\"loading-message\">\n            Cargando fotos...\n          </div>\n        )}\n\n        {error && (\n          <div className=\"error-message\">\n            {error}\n          </div>\n        )}\n\n        {!loading && displayedPhotos.length === 0 && !error && (\n          <div className=\"no-photos-message\">\n            No hay fotos disponibles en este momento\n          </div>\n        )}\n\n        {!loading && displayedPhotos.length > 0 && (\n          <>\n            <div className=\"gallery-grid\">\n              {displayedPhotos.map(photo => (\n                <div key={photo.id} className=\"photo-card\">\n                  <div className=\"photo-image\">\n                    <img \n                      src={photo.thumbnail} \n                      alt={photo.filename}\n                      className=\"photo-img\"\n                    />\n                  </div>\n                  <div className=\"photo-info\">\n                    <h4>{photo.school}</h4>\n                    <p className=\"photo-date\">{photo.date}</p>\n                    <div className=\"photo-footer\">\n                      <span className=\"photo-price\">$29.99</span>\n                      <button \n                        className=\"btn btn-primary\" \n                        style={{padding: '0.5rem 1rem', fontSize: '0.85rem'}}\n                        onClick={() => handleAddToCart(photo)}\n                      >\n                        Comprar\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {hasMorePhotos && (\n              <div className=\"load-more-container\">\n                <button \n                  className=\"btn btn-primary load-more-btn\"\n                  onClick={handleLoadMore}\n                  disabled={loadingMore}\n                >\n                  {loadingMore ? 'Cargando...' : 'Ver más fotos'}\n                </button>\n                <p className=\"photos-count\">\n                  Mostrando {displayedPhotos.length} de {allPhotos.length} fotos\n                </p>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Gallery;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}