{"ast":null,"code":"var _jsxFileName = \"/Users/axelhernandez/Surf/frontend/src/components/SchoolDetail.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport './SchoolDetail.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SchoolDetail = ({\n  schoolName,\n  onBack,\n  onAddToCart\n}) => {\n  _s();\n  const [activeTab, setActiveTab] = useState('upload');\n  const [selectedDate, setSelectedDate] = useState('');\n  const fileInputRef = useRef(null);\n  const [uploadedImage, setUploadedImage] = useState(null);\n  const [uploadedFile, setUploadedFile] = useState(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [analysisResult, setAnalysisResult] = useState(null);\n  const [showResults, setShowResults] = useState(false);\n  const [error, setError] = useState(null);\n  const handleFileUpload = event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (file) {\n      setUploadedFile(file);\n      const reader = new FileReader();\n      reader.onload = e => {\n        var _e$target;\n        setUploadedImage((_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.result);\n      };\n      reader.readAsDataURL(file);\n      setError(null);\n    }\n  };\n  const handleUploadClick = () => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const handleAnalyzePhoto = async () => {\n    if (!uploadedFile) {\n      setError('Por favor, selecciona una foto primero');\n      return;\n    }\n    setIsSearching(true);\n    setError(null);\n    setShowResults(false);\n    try {\n      const formData = new FormData();\n      formData.append('selfie', uploadedFile);\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n      const response = await fetch(`${apiUrl}/compare-faces-folder?search_folder=${schoolName}`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        let errorMessage = 'Error en la búsqueda';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.detail || errorMessage;\n        } catch (e) {\n          errorMessage = `Error ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n      const data = await response.json();\n      setAnalysisResult(data);\n      setShowResults(true);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Error al analizar la foto. Verifica que el servidor esté corriendo.';\n      setError(errorMessage);\n      console.error('Error detallado:', err);\n      setShowResults(false);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const handleAddToCart = filename => {\n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n    const cartItem = {\n      id: `${schoolName}_${filename}`,\n      name: `${schoolName} - ${filename}`,\n      price: 29.99,\n      image: `${apiUrl}/photos/preview?folder_name=${schoolName}&filename=${filename}&watermark=true`\n    };\n    onAddToCart(cartItem);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"school-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"school-detail-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-back\",\n        onClick: onBack,\n        children: \"\\u2190 Volver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: schoolName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"school-detail-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"date-filter\",\n            children: \"Filtrar por d\\xEDa:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"date-filter\",\n            type: \"date\",\n            value: selectedDate,\n            onChange: e => setSelectedDate(e.target.value),\n            className: \"date-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recognition-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Encuentra tus fotos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Sube una foto de tu rostro para identificar todas tus fotos en \", schoolName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recognition-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"camera-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tab-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `tab-btn ${activeTab === 'camera' ? 'active' : ''}`,\n                onClick: () => setActiveTab('camera'),\n                children: \"C\\xE1mara\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `tab-btn ${activeTab === 'upload' ? 'active' : ''}`,\n                onClick: () => setActiveTab('upload'),\n                children: \"Subir Foto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), activeTab === 'camera' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tab-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Captura Tu Rostro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"camera-feed\",\n                children: /*#__PURE__*/_jsxDEV(\"video\", {\n                  id: \"video\",\n                  autoPlay: true,\n                  playsInline: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-dark\",\n                  children: \"Iniciar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success\",\n                  children: \"Capturar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  children: \"Detener\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this), activeTab === 'upload' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tab-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Sube Tu Foto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-area\",\n                children: uploadedImage ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"uploaded-image-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: uploadedImage,\n                    alt: \"Foto subida\",\n                    className: \"uploaded-image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-secondary\",\n                    onClick: () => {\n                      setUploadedImage(null);\n                      if (fileInputRef.current) fileInputRef.current.value = '';\n                    },\n                    children: \"Cambiar Foto\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"upload-placeholder\",\n                  onClick: handleUploadClick,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"upload-icon\",\n                    children: \"\\u2191\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Haz clic para seleccionar una foto\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"o arrastra una imagen aqu\\xED\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: fileInputRef,\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleFileUpload,\n                style: {\n                  display: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), uploadedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success\",\n                  onClick: handleAnalyzePhoto,\n                  disabled: isSearching,\n                  children: isSearching ? 'Analizando...' : 'Buscar mis fotos'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-dark\",\n                  onClick: () => {\n                    setUploadedImage(null);\n                    setUploadedFile(null);\n                    if (fileInputRef.current) fileInputRef.current.value = '';\n                  },\n                  children: \"Limpiar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 21\n              }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error-message\",\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), isSearching && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Analizando tu rostro...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Buscando coincidencias en \", schoolName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), showResults && analysisResult && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Resultados del An\\xE1lisis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"statistics\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stat-value\",\n                children: analysisResult.statistics.matches_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stat-label\",\n                children: \"Coincidencias\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stat-value\",\n                children: analysisResult.statistics.total_photos\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stat-label\",\n                children: \"Fotos Analizadas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stat-value\",\n                children: [analysisResult.statistics.match_percentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stat-label\",\n                children: \"Porcentaje\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), analysisResult.matches.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"matches-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Fotos Encontradas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"matches-grid\",\n            children: analysisResult.matches.map(match => {\n              const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"match-card\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${apiUrl}/photos/preview?folder_name=${schoolName}&filename=${match.file}&watermark=true`,\n                  alt: match.file,\n                  className: \"match-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"match-file\",\n                    children: match.file\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"match-similarity\",\n                    children: [\"Similitud: \", match.similarity.toFixed(1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary\",\n                    onClick: () => handleAddToCart(match.file),\n                    style: {\n                      padding: '0.5rem 1rem',\n                      fontSize: '0.85rem'\n                    },\n                    children: \"Comprar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 25\n                }, this)]\n              }, match.file, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 15\n        }, this), analysisResult.non_matches.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"non-matches-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [\"Fotos sin Coincidencia (\", analysisResult.non_matches.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"non-matches-list\",\n            children: [analysisResult.non_matches.slice(0, 5).map(match => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"non-match-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: match.file\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"similarity-badge\",\n                children: [match.similarity.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 23\n              }, this)]\n            }, match.file, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 21\n            }, this)), analysisResult.non_matches.length > 5 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"more-items\",\n              children: [\"+\", analysisResult.non_matches.length - 5, \" m\\xE1s\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n_s(SchoolDetail, \"kdGhrubZFwK+6zkwPnq/GGZdRFo=\");\n_c = SchoolDetail;\nexport default SchoolDetail;\nvar _c;\n$RefreshReg$(_c, \"SchoolDetail\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","SchoolDetail","schoolName","onBack","onAddToCart","_s","activeTab","setActiveTab","selectedDate","setSelectedDate","fileInputRef","uploadedImage","setUploadedImage","uploadedFile","setUploadedFile","isSearching","setIsSearching","analysisResult","setAnalysisResult","showResults","setShowResults","error","setError","handleFileUpload","event","_event$target$files","file","target","files","reader","FileReader","onload","e","_e$target","result","readAsDataURL","handleUploadClick","_fileInputRef$current","current","click","handleAnalyzePhoto","formData","FormData","append","apiUrl","process","env","REACT_APP_API_URL","response","fetch","method","body","headers","ok","errorMessage","errorData","json","detail","status","statusText","Error","data","err","message","console","handleAddToCart","filename","cartItem","id","name","price","image","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","value","onChange","autoPlay","playsInline","src","alt","ref","accept","style","display","disabled","statistics","matches_count","total_photos","match_percentage","matches","length","map","match","similarity","toFixed","padding","fontSize","non_matches","slice","_c","$RefreshReg$"],"sources":["/Users/axelhernandez/Surf/frontend/src/components/SchoolDetail.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport './SchoolDetail.css';\n\ninterface SchoolDetailProps {\n  schoolName: string;\n  onBack: () => void;\n  onAddToCart: (item: any) => void;\n}\n\ninterface AnalysisResult {\n  status: string;\n  matches: Array<{ file: string; similarity: number }>;\n  non_matches: Array<{ file: string; similarity: number }>;\n  statistics: {\n    total_photos: number;\n    matches_count: number;\n    match_percentage: number;\n    threshold_used: number;\n  };\n}\n\nconst SchoolDetail: React.FC<SchoolDetailProps> = ({ schoolName, onBack, onAddToCart }) => {\n  const [activeTab, setActiveTab] = useState<'camera' | 'upload'>('upload');\n  const [selectedDate, setSelectedDate] = useState<string>('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [uploadedImage, setUploadedImage] = useState<string | null>(null);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [analysisResult, setAnalysisResult] = useState<AnalysisResult | null>(null);\n  const [showResults, setShowResults] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setUploadedFile(file);\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setUploadedImage(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n      setError(null);\n    }\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleAnalyzePhoto = async () => {\n    if (!uploadedFile) {\n      setError('Por favor, selecciona una foto primero');\n      return;\n    }\n\n    setIsSearching(true);\n    setError(null);\n    setShowResults(false);\n\n    try {\n      const formData = new FormData();\n      formData.append('selfie', uploadedFile);\n\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n      const response = await fetch(`${apiUrl}/compare-faces-folder?search_folder=${schoolName}`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        let errorMessage = 'Error en la búsqueda';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.detail || errorMessage;\n        } catch (e) {\n          errorMessage = `Error ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data: AnalysisResult = await response.json();\n      setAnalysisResult(data);\n      setShowResults(true);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Error al analizar la foto. Verifica que el servidor esté corriendo.';\n      setError(errorMessage);\n      console.error('Error detallado:', err);\n      setShowResults(false);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  const handleAddToCart = (filename: string) => {\n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n    const cartItem = {\n      id: `${schoolName}_${filename}`,\n      name: `${schoolName} - ${filename}`,\n      price: 29.99,\n      image: `${apiUrl}/photos/preview?folder_name=${schoolName}&filename=${filename}&watermark=true`,\n    };\n    onAddToCart(cartItem);\n  };\n\n  return (\n    <div className=\"school-detail\">\n      <div className=\"school-detail-header\">\n        <button className=\"btn-back\" onClick={onBack}>\n          ← Volver\n        </button>\n        <h1>{schoolName}</h1>\n      </div>\n\n      <div className=\"school-detail-content\">\n        <div className=\"filters-section\">\n          <div className=\"filter-group\">\n            <label htmlFor=\"date-filter\">Filtrar por día:</label>\n            <input\n              id=\"date-filter\"\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"date-input\"\n            />\n          </div>\n        </div>\n\n        <div className=\"recognition-section\">\n          <div className=\"section-header\">\n            <h2>Encuentra tus fotos</h2>\n            <p>Sube una foto de tu rostro para identificar todas tus fotos en {schoolName}</p>\n          </div>\n\n          <div className=\"recognition-container\">\n            <div className=\"camera-panel\">\n              <div className=\"tab-buttons\">\n                <button \n                  className={`tab-btn ${activeTab === 'camera' ? 'active' : ''}`}\n                  onClick={() => setActiveTab('camera')}\n                >\n                  Cámara\n                </button>\n                <button \n                  className={`tab-btn ${activeTab === 'upload' ? 'active' : ''}`}\n                  onClick={() => setActiveTab('upload')}\n                >\n                  Subir Foto\n                </button>\n              </div>\n\n              {activeTab === 'camera' && (\n                <div className=\"tab-content\">\n                  <h3>Captura Tu Rostro</h3>\n                  <div className=\"camera-feed\">\n                    <video id=\"video\" autoPlay playsInline></video>\n                  </div>\n                  <div className=\"button-group\">\n                    <button className=\"btn btn-dark\">Iniciar</button>\n                    <button className=\"btn btn-success\">Capturar</button>\n                    <button className=\"btn btn-danger\">Detener</button>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'upload' && (\n                <div className=\"tab-content\">\n                  <h3>Sube Tu Foto</h3>\n                  <div className=\"upload-area\">\n                    {uploadedImage ? (\n                      <div className=\"uploaded-image-container\">\n                        <img src={uploadedImage} alt=\"Foto subida\" className=\"uploaded-image\" />\n                        <button \n                          className=\"btn btn-secondary\"\n                          onClick={() => {\n                            setUploadedImage(null);\n                            if (fileInputRef.current) fileInputRef.current.value = '';\n                          }}\n                        >\n                          Cambiar Foto\n                        </button>\n                      </div>\n                    ) : (\n                      <div className=\"upload-placeholder\" onClick={handleUploadClick}>\n                        <div className=\"upload-icon\">↑</div>\n                        <p>Haz clic para seleccionar una foto</p>\n                        <span>o arrastra una imagen aquí</span>\n                      </div>\n                    )}\n                  </div>\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileUpload}\n                    style={{ display: 'none' }}\n                  />\n                  {uploadedImage && (\n                    <div className=\"button-group\">\n                      <button \n                        className=\"btn btn-success\"\n                        onClick={handleAnalyzePhoto}\n                        disabled={isSearching}\n                      >\n                        {isSearching ? 'Analizando...' : 'Buscar mis fotos'}\n                      </button>\n                      <button \n                        className=\"btn btn-dark\"\n                        onClick={() => {\n                          setUploadedImage(null);\n                          setUploadedFile(null);\n                          if (fileInputRef.current) fileInputRef.current.value = '';\n                        }}\n                      >\n                        Limpiar\n                      </button>\n                    </div>\n                  )}\n                  {error && (\n                    <div className=\"error-message\">\n                      {error}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {isSearching && (\n          <div className=\"loading-modal-overlay\">\n            <div className=\"loading-modal\">\n              <div className=\"spinner\"></div>\n              <h3>Analizando tu rostro...</h3>\n              <p>Buscando coincidencias en {schoolName}</p>\n              <div className=\"progress-bar\">\n                <div className=\"progress-fill\"></div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {showResults && analysisResult && (\n          <div className=\"results-section\">\n            <div className=\"results-header\">\n              <h3>Resultados del Análisis</h3>\n              <div className=\"statistics\">\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{analysisResult.statistics.matches_count}</div>\n                  <div className=\"stat-label\">Coincidencias</div>\n                </div>\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{analysisResult.statistics.total_photos}</div>\n                  <div className=\"stat-label\">Fotos Analizadas</div>\n                </div>\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{analysisResult.statistics.match_percentage}%</div>\n                  <div className=\"stat-label\">Porcentaje</div>\n                </div>\n              </div>\n            </div>\n\n            {analysisResult.matches.length > 0 && (\n              <div className=\"matches-container\">\n                <h4>Fotos Encontradas</h4>\n                <div className=\"matches-grid\">\n                  {analysisResult.matches.map((match) => {\n                    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n                    return (\n                      <div key={match.file} className=\"match-card\">\n                        <img \n                          src={`${apiUrl}/photos/preview?folder_name=${schoolName}&filename=${match.file}&watermark=true`}\n                          alt={match.file}\n                          className=\"match-image\"\n                        />\n                        <div className=\"match-info\">\n                          <p className=\"match-file\">{match.file}</p>\n                          <p className=\"match-similarity\">\n                            Similitud: {match.similarity.toFixed(1)}%\n                          </p>\n                          <button \n                            className=\"btn btn-primary\"\n                            onClick={() => handleAddToCart(match.file)}\n                            style={{padding: '0.5rem 1rem', fontSize: '0.85rem'}}\n                          >\n                            Comprar\n                          </button>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {analysisResult.non_matches.length > 0 && (\n              <div className=\"non-matches-container\">\n                <h4>Fotos sin Coincidencia ({analysisResult.non_matches.length})</h4>\n                <div className=\"non-matches-list\">\n                  {analysisResult.non_matches.slice(0, 5).map((match) => (\n                    <div key={match.file} className=\"non-match-item\">\n                      <span>{match.file}</span>\n                      <span className=\"similarity-badge\">{match.similarity.toFixed(1)}%</span>\n                    </div>\n                  ))}\n                  {analysisResult.non_matches.length > 5 && (\n                    <p className=\"more-items\">+{analysisResult.non_matches.length - 5} más</p>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SchoolDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}