{"ast":null,"code":"import _objectSpread from\"/Users/axelhernandez/Surf/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Configuración de la API\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';// Tipos de datos\n// Servicio de API\nexport const apiService={// Convertir URL relativa a absoluta\ngetAbsoluteUrl(url){if(url.startsWith('http://')||url.startsWith('https://')){return url;}return\"\".concat(API_BASE_URL).concat(url);},// Health check\nasync healthCheck(){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/health\"));if(!response.ok)throw new Error('Health check failed');return await response.json();}catch(error){console.error('Error en health check:',error);throw error;}},// Búsqueda de fotos similares en el marketplace\nasync searchSimilarPhotos(imageFile){try{const formData=new FormData();formData.append('selfie',imageFile);const response=await fetch(\"\".concat(API_BASE_URL,\"/marketplace/search-similar\"),{method:'POST',body:formData});if(!response.ok){const error=await response.json();throw new Error(error.detail||'Error en la búsqueda');}const data=await response.json();// Convertir URLs relativas a absolutas\nconst photosWithAbsoluteUrls=(data.photos||[]).map(photo=>_objectSpread(_objectSpread({},photo),{},{thumbnail:this.getAbsoluteUrl(photo.thumbnail),image:this.getAbsoluteUrl(photo.image)}));const matchesWithAbsoluteUrls=(data.matches||[]).map(photo=>_objectSpread(_objectSpread({},photo),{},{thumbnail:this.getAbsoluteUrl(photo.thumbnail),image:this.getAbsoluteUrl(photo.image)}));return _objectSpread(_objectSpread({},data),{},{photos:photosWithAbsoluteUrls,matches:matchesWithAbsoluteUrls});}catch(error){console.error('Error buscando fotos similares:',error);throw error;}},// Obtener todas las fotos del marketplace\nasync getMarketplacePhotos(){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/marketplace/photos\"));if(!response.ok)throw new Error('Error obteniendo fotos');const data=await response.json();// Convertir URLs relativas a absolutas\nconst photosWithAbsoluteUrls=(data.photos||[]).map(photo=>_objectSpread(_objectSpread({},photo),{},{thumbnail:this.getAbsoluteUrl(photo.thumbnail),image:this.getAbsoluteUrl(photo.image)}));return photosWithAbsoluteUrls;}catch(error){console.error('Error obteniendo fotos del marketplace:',error);throw error;}},// Obtener filtros disponibles\nasync getMarketplaceFilters(){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/marketplace/filters\"));if(!response.ok)throw new Error('Error obteniendo filtros');return await response.json();}catch(error){console.error('Error obteniendo filtros:',error);throw error;}},// Obtener preview de una foto\ngetPhotoPreviewUrl(folderName,filename){let watermark=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return\"\".concat(API_BASE_URL,\"/photos/preview?folder_name=\").concat(folderName,\"&filename=\").concat(filename,\"&watermark=\").concat(watermark);},// Obtener foto original\ngetPhotoViewUrl(folderName,filename){return\"\".concat(API_BASE_URL,\"/photos/view?folder_name=\").concat(folderName,\"&filename=\").concat(filename);}};export default apiService;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiService","getAbsoluteUrl","url","startsWith","concat","healthCheck","response","fetch","ok","Error","json","error","console","searchSimilarPhotos","imageFile","formData","FormData","append","method","body","detail","data","photosWithAbsoluteUrls","photos","map","photo","_objectSpread","thumbnail","image","matchesWithAbsoluteUrls","matches","getMarketplacePhotos","getMarketplaceFilters","getPhotoPreviewUrl","folderName","filename","watermark","arguments","length","undefined","getPhotoViewUrl"],"sources":["/Users/axelhernandez/Surf/frontend/src/services/api.ts"],"sourcesContent":["// Configuración de la API\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Tipos de datos\nexport interface Photo {\n  id: string;\n  filename: string;\n  school: string;\n  date: string;\n  similarity?: number;\n  thumbnail: string;\n  image: string;\n  price?: number;\n}\n\nexport interface SearchResult {\n  status: string;\n  photos: Photo[];\n  matches: Photo[];\n  matches_count: number;\n  total_photos: number;\n  threshold_used: number;\n}\n\nexport interface HealthCheckResponse {\n  status: string;\n  message: string;\n  model: string;\n  model_loaded: boolean;\n}\n\n// Servicio de API\nexport const apiService = {\n  // Convertir URL relativa a absoluta\n  getAbsoluteUrl(url: string): string {\n    if (url.startsWith('http://') || url.startsWith('https://')) {\n      return url;\n    }\n    return `${API_BASE_URL}${url}`;\n  },\n\n  // Health check\n  async healthCheck(): Promise<HealthCheckResponse> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/health`);\n      if (!response.ok) throw new Error('Health check failed');\n      return await response.json();\n    } catch (error) {\n      console.error('Error en health check:', error);\n      throw error;\n    }\n  },\n\n  // Búsqueda de fotos similares en el marketplace\n  async searchSimilarPhotos(imageFile: File): Promise<SearchResult> {\n    try {\n      const formData = new FormData();\n      formData.append('selfie', imageFile);\n\n      const response = await fetch(`${API_BASE_URL}/marketplace/search-similar`, {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Error en la búsqueda');\n      }\n\n      const data = await response.json();\n      \n      // Convertir URLs relativas a absolutas\n      const photosWithAbsoluteUrls = (data.photos || []).map((photo: Photo) => ({\n        ...photo,\n        thumbnail: this.getAbsoluteUrl(photo.thumbnail),\n        image: this.getAbsoluteUrl(photo.image),\n      }));\n      \n      const matchesWithAbsoluteUrls = (data.matches || []).map((photo: Photo) => ({\n        ...photo,\n        thumbnail: this.getAbsoluteUrl(photo.thumbnail),\n        image: this.getAbsoluteUrl(photo.image),\n      }));\n      \n      return {\n        ...data,\n        photos: photosWithAbsoluteUrls,\n        matches: matchesWithAbsoluteUrls,\n      };\n    } catch (error) {\n      console.error('Error buscando fotos similares:', error);\n      throw error;\n    }\n  },\n\n  // Obtener todas las fotos del marketplace\n  async getMarketplacePhotos(): Promise<Photo[]> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/marketplace/photos`);\n      if (!response.ok) throw new Error('Error obteniendo fotos');\n      const data = await response.json();\n      \n      // Convertir URLs relativas a absolutas\n      const photosWithAbsoluteUrls = (data.photos || []).map((photo: Photo) => ({\n        ...photo,\n        thumbnail: this.getAbsoluteUrl(photo.thumbnail),\n        image: this.getAbsoluteUrl(photo.image),\n      }));\n      \n      return photosWithAbsoluteUrls;\n    } catch (error) {\n      console.error('Error obteniendo fotos del marketplace:', error);\n      throw error;\n    }\n  },\n\n  // Obtener filtros disponibles\n  async getMarketplaceFilters() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/marketplace/filters`);\n      if (!response.ok) throw new Error('Error obteniendo filtros');\n      return await response.json();\n    } catch (error) {\n      console.error('Error obteniendo filtros:', error);\n      throw error;\n    }\n  },\n\n  // Obtener preview de una foto\n  getPhotoPreviewUrl(folderName: string, filename: string, watermark: boolean = true): string {\n    return `${API_BASE_URL}/photos/preview?folder_name=${folderName}&filename=${filename}&watermark=${watermark}`;\n  },\n\n  // Obtener foto original\n  getPhotoViewUrl(folderName: string, filename: string): string {\n    return `${API_BASE_URL}/photos/view?folder_name=${folderName}&filename=${filename}`;\n  },\n};\n\nexport default apiService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}