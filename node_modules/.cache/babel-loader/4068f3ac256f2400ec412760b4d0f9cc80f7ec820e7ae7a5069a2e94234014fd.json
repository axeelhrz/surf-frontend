{"ast":null,"code":"// Configuración de la API\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Tipos de datos\n\n// Servicio de API\nexport const apiService = {\n  // Health check\n  async healthCheck() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/health`);\n      if (!response.ok) throw new Error('Health check failed');\n      return await response.json();\n    } catch (error) {\n      console.error('Error en health check:', error);\n      throw error;\n    }\n  },\n  // Búsqueda de fotos similares en el marketplace\n  async searchSimilarPhotos(imageFile) {\n    try {\n      const formData = new FormData();\n      formData.append('selfie', imageFile);\n      const response = await fetch(`${API_BASE_URL}/marketplace/search-similar`, {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Error en la búsqueda');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error buscando fotos similares:', error);\n      throw error;\n    }\n  },\n  // Obtener todas las fotos del marketplace\n  async getMarketplacePhotos() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/marketplace/photos`);\n      if (!response.ok) throw new Error('Error obteniendo fotos');\n      const data = await response.json();\n      return data.photos || [];\n    } catch (error) {\n      console.error('Error obteniendo fotos del marketplace:', error);\n      throw error;\n    }\n  },\n  // Obtener filtros disponibles\n  async getMarketplaceFilters() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/marketplace/filters`);\n      if (!response.ok) throw new Error('Error obteniendo filtros');\n      return await response.json();\n    } catch (error) {\n      console.error('Error obteniendo filtros:', error);\n      throw error;\n    }\n  },\n  // Obtener preview de una foto\n  getPhotoPreviewUrl(folderName, filename, watermark = true) {\n    return `${API_BASE_URL}/photos/preview?folder_name=${folderName}&filename=${filename}&watermark=${watermark}`;\n  },\n  // Obtener foto original\n  getPhotoViewUrl(folderName, filename) {\n    return `${API_BASE_URL}/photos/view?folder_name=${folderName}&filename=${filename}`;\n  }\n};\nexport default apiService;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiService","healthCheck","response","fetch","ok","Error","json","error","console","searchSimilarPhotos","imageFile","formData","FormData","append","method","body","detail","getMarketplacePhotos","data","photos","getMarketplaceFilters","getPhotoPreviewUrl","folderName","filename","watermark","getPhotoViewUrl"],"sources":["/Users/axelhernandez/Surf/frontend/src/services/api.ts"],"sourcesContent":["// Configuración de la API\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Tipos de datos\nexport interface Photo {\n  id: string;\n  filename: string;\n  school: string;\n  date: string;\n  similarity?: number;\n  thumbnail: string;\n  image: string;\n  price?: number;\n}\n\nexport interface SearchResult {\n  status: string;\n  photos: Photo[];\n  matches: Photo[];\n  matches_count: number;\n  total_photos: number;\n  threshold_used: number;\n}\n\nexport interface HealthCheckResponse {\n  status: string;\n  message: string;\n  model: string;\n  model_loaded: boolean;\n}\n\n// Servicio de API\nexport const apiService = {\n  // Health check\n  async healthCheck(): Promise<HealthCheckResponse> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/health`);\n      if (!response.ok) throw new Error('Health check failed');\n      return await response.json();\n    } catch (error) {\n      console.error('Error en health check:', error);\n      throw error;\n    }\n  },\n\n  // Búsqueda de fotos similares en el marketplace\n  async searchSimilarPhotos(imageFile: File): Promise<SearchResult> {\n    try {\n      const formData = new FormData();\n      formData.append('selfie', imageFile);\n\n      const response = await fetch(`${API_BASE_URL}/marketplace/search-similar`, {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Error en la búsqueda');\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error buscando fotos similares:', error);\n      throw error;\n    }\n  },\n\n  // Obtener todas las fotos del marketplace\n  async getMarketplacePhotos(): Promise<Photo[]> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/marketplace/photos`);\n      if (!response.ok) throw new Error('Error obteniendo fotos');\n      const data = await response.json();\n      return data.photos || [];\n    } catch (error) {\n      console.error('Error obteniendo fotos del marketplace:', error);\n      throw error;\n    }\n  },\n\n  // Obtener filtros disponibles\n  async getMarketplaceFilters() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/marketplace/filters`);\n      if (!response.ok) throw new Error('Error obteniendo filtros');\n      return await response.json();\n    } catch (error) {\n      console.error('Error obteniendo filtros:', error);\n      throw error;\n    }\n  },\n\n  // Obtener preview de una foto\n  getPhotoPreviewUrl(folderName: string, filename: string, watermark: boolean = true): string {\n    return `${API_BASE_URL}/photos/preview?folder_name=${folderName}&filename=${filename}&watermark=${watermark}`;\n  },\n\n  // Obtener foto original\n  getPhotoViewUrl(folderName: string, filename: string): string {\n    return `${API_BASE_URL}/photos/view?folder_name=${folderName}&filename=${filename}`;\n  },\n};\n\nexport default apiService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}